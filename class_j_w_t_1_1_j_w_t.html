<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TriTochki: Класс JWT\JWT</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="mstile-144x144.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TriTochki
   </div>
   <div id="projectbrief">чат</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Поиск" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Поиск');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_j_w_t_1_1_j_w_t.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Открытые статические члены</a> &#124;
<a href="#pub-attribs">Открытые атрибуты</a> &#124;
<a href="#pub-static-attribs">Статические открытые данные</a> &#124;
<a href="class_j_w_t_1_1_j_w_t-members.html">Полный список членов класса</a>  </div>
  <div class="headertitle">
<div class="title">Класс JWT\JWT</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Открытые статические члены</h2></td></tr>
<tr class="memitem:afdce03a88f04f81c41cd1d3ce5771c68"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_j_w_t_1_1_j_w_t.html#afdce03a88f04f81c41cd1d3ce5771c68">decode</a> ($jwt, $key, array $allowed_algs=array())</td></tr>
<tr class="separator:afdce03a88f04f81c41cd1d3ce5771c68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae350f876e9da3d1aa73620e1aafd4ad8"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_j_w_t_1_1_j_w_t.html#ae350f876e9da3d1aa73620e1aafd4ad8">encode</a> ($payload, $key, $alg='HS256', $keyId=null, $head=null)</td></tr>
<tr class="separator:ae350f876e9da3d1aa73620e1aafd4ad8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a435d0d82b2ca3cca47e0902b8013ca12"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_j_w_t_1_1_j_w_t.html#a435d0d82b2ca3cca47e0902b8013ca12">jsonDecode</a> ($input)</td></tr>
<tr class="separator:a435d0d82b2ca3cca47e0902b8013ca12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc333525c71ad92e6555c91b198fe925"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_j_w_t_1_1_j_w_t.html#adc333525c71ad92e6555c91b198fe925">jsonEncode</a> ($input)</td></tr>
<tr class="separator:adc333525c71ad92e6555c91b198fe925"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dd3966da075dcf45391b4317d100c5c"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_j_w_t_1_1_j_w_t.html#a6dd3966da075dcf45391b4317d100c5c">sign</a> ($msg, $key, $alg='HS256')</td></tr>
<tr class="separator:a6dd3966da075dcf45391b4317d100c5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcd4b0169e5dcc33a3b94901955845dd"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_j_w_t_1_1_j_w_t.html#afcd4b0169e5dcc33a3b94901955845dd">urlsafeB64Decode</a> ($input)</td></tr>
<tr class="separator:afcd4b0169e5dcc33a3b94901955845dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae901b7dae5d8c2d2fba4ad43eb8010a4"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_j_w_t_1_1_j_w_t.html#ae901b7dae5d8c2d2fba4ad43eb8010a4">urlsafeB64Encode</a> ($input)</td></tr>
<tr class="separator:ae901b7dae5d8c2d2fba4ad43eb8010a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Открытые атрибуты</h2></td></tr>
<tr class="memitem:a368a0e3c908b11d12ac1e02eebe15079"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_j_w_t_1_1_j_w_t.html#a368a0e3c908b11d12ac1e02eebe15079">ASN1_BIT_STRING</a> = 0x03</td></tr>
<tr class="separator:a368a0e3c908b11d12ac1e02eebe15079"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a687f9c45e97ea4609d260108c66ebe54"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_j_w_t_1_1_j_w_t.html#a687f9c45e97ea4609d260108c66ebe54">ASN1_INTEGER</a> = 0x02</td></tr>
<tr class="separator:a687f9c45e97ea4609d260108c66ebe54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb818526edfd85904f3048f9322f1231"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_j_w_t_1_1_j_w_t.html#afb818526edfd85904f3048f9322f1231">ASN1_SEQUENCE</a> = 0x10</td></tr>
<tr class="separator:afb818526edfd85904f3048f9322f1231"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Статические открытые данные</h2></td></tr>
<tr class="memitem:adb20e5b829c374c490b4e86437847d8a"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_j_w_t_1_1_j_w_t.html#adb20e5b829c374c490b4e86437847d8a">$leeway</a> = 0</td></tr>
<tr class="separator:adb20e5b829c374c490b4e86437847d8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52f6f608d7a40740d168a474b9d9d252"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_j_w_t_1_1_j_w_t.html#a52f6f608d7a40740d168a474b9d9d252">$private_key</a> =</td></tr>
<tr class="separator:a52f6f608d7a40740d168a474b9d9d252"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5590a1db32a02bbd0c0290e94b3704d9"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_j_w_t_1_1_j_w_t.html#a5590a1db32a02bbd0c0290e94b3704d9">$public_key</a> =</td></tr>
<tr class="separator:a5590a1db32a02bbd0c0290e94b3704d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1c2f153bce58676f06061202eb0adf4"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_j_w_t_1_1_j_w_t.html#aa1c2f153bce58676f06061202eb0adf4">$supported_algs</a></td></tr>
<tr class="separator:aa1c2f153bce58676f06061202eb0adf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fc131b32308f2bacfd322ee88359af1"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_j_w_t_1_1_j_w_t.html#a9fc131b32308f2bacfd322ee88359af1">$timestamp</a> = null</td></tr>
<tr class="separator:a9fc131b32308f2bacfd322ee88359af1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Методы</h2>
<a id="afdce03a88f04f81c41cd1d3ce5771c68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdce03a88f04f81c41cd1d3ce5771c68">&#9670;&nbsp;</a></span>decode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static JWT\JWT::decode </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$jwt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$allowed_algs</em> = <code>array()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Decodes a <a class="el" href="class_j_w_t_1_1_j_w_t.html">JWT</a> string into a PHP object.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$jwt</td><td>The <a class="el" href="class_j_w_t_1_1_j_w_t.html">JWT</a> </td></tr>
    <tr><td class="paramtype">string&#160;|&#160;array&#160;|&#160;resource</td><td class="paramname">$key</td><td>The key, or map of keys. If the algorithm used is asymmetric, this is the public key </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$allowed_algs</td><td>List of supported verification algorithms Supported algorithms are 'ES256', 'HS256', 'HS384', 'HS512', 'RS256', 'RS384', and 'RS512'</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>object The <a class="el" href="class_j_w_t_1_1_j_w_t.html">JWT</a>'s payload as a PHP object</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">UnexpectedValueException</td><td>Provided <a class="el" href="class_j_w_t_1_1_j_w_t.html">JWT</a> was invalid </td></tr>
    <tr><td class="paramname">SignatureInvalidException</td><td>Provided <a class="el" href="class_j_w_t_1_1_j_w_t.html">JWT</a> was invalid because the signature verification failed </td></tr>
    <tr><td class="paramname">BeforeValidException</td><td>Provided <a class="el" href="class_j_w_t_1_1_j_w_t.html">JWT</a> is trying to be used before it's eligible as defined by 'nbf' </td></tr>
    <tr><td class="paramname">BeforeValidException</td><td>Provided <a class="el" href="class_j_w_t_1_1_j_w_t.html">JWT</a> is trying to be used before it's been created as defined by 'iat' </td></tr>
    <tr><td class="paramname">ExpiredException</td><td>Provided <a class="el" href="class_j_w_t_1_1_j_w_t.html">JWT</a> has since expired, as defined by the 'exp' claim</td></tr>
  </table>
  </dd>
</dl>
<p>@uses jsonDecode @uses urlsafeB64Decode </p>
<div class="fragment"><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                                                                                {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            <a class="code" href="class_j_w_t_1_1_j_w_t.html#a9fc131b32308f2bacfd322ee88359af1">$timestamp</a> = \is_null(static::$timestamp) ? \time() : static::<a class="code" href="class_j_w_t_1_1_j_w_t.html#a9fc131b32308f2bacfd322ee88359af1">$timestamp</a>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            <span class="keywordflow">if</span>(empty($key)){</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidArgumentException(<span class="stringliteral">&#39;Key may not be empty&#39;</span>);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            }</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            $tks = \explode(<span class="charliteral">&#39;.&#39;</span>, <a class="code" href="login_8php.html#a62dd3be39bdab088e08aef405eef5de8">$jwt</a>);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <span class="keywordflow">if</span>(\count($tks) != 3){</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> UnexpectedValueException(<span class="stringliteral">&#39;Wrong number of segments&#39;</span>);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            list($headb64, $bodyb64, $cryptob64) = $tks;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <span class="keywordflow">if</span>(<span class="keyword">null</span> === ($header = static::jsonDecode(static::urlsafeB64Decode($headb64)))){</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> UnexpectedValueException(<span class="stringliteral">&#39;Invalid header encoding&#39;</span>);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            <span class="keywordflow">if</span>(<span class="keyword">null</span> === $payload = static::jsonDecode(static::urlsafeB64Decode($bodyb64))){</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> UnexpectedValueException(<span class="stringliteral">&#39;Invalid claims encoding&#39;</span>);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            }</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <span class="keywordflow">if</span>(<span class="keyword">false</span> === ($sig = static::urlsafeB64Decode($cryptob64))){</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> UnexpectedValueException(<span class="stringliteral">&#39;Invalid signature encoding&#39;</span>);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="keywordflow">if</span>(empty($header-&gt;alg)){</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> UnexpectedValueException(<span class="stringliteral">&#39;Empty algorithm&#39;</span>);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            <span class="keywordflow">if</span>(empty(static::$supported_algs[$header-&gt;alg])){</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> UnexpectedValueException(<span class="stringliteral">&#39;Algorithm not supported&#39;</span>);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            <span class="keywordflow">if</span>(!\in_array($header-&gt;alg, $allowed_algs)){</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> UnexpectedValueException(<span class="stringliteral">&#39;Algorithm not allowed&#39;</span>);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            <span class="keywordflow">if</span>($header-&gt;alg === <span class="stringliteral">&#39;ES256&#39;</span>){</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                <span class="comment">// OpenSSL expects an ASN.1 DER sequence for ES256 signatures</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                $sig = self::signatureToDER($sig);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            <span class="keywordflow">if</span>(\is_array($key) || $key instanceof \ArrayAccess){</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                <span class="keywordflow">if</span>(isset($header-&gt;kid)){</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                    <span class="keywordflow">if</span>(!isset($key[$header-&gt;kid])){</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                        <span class="keywordflow">throw</span> <span class="keyword">new</span> UnexpectedValueException(<span class="stringliteral">&#39;&quot;kid&quot; invalid, unable to lookup correct key&#39;</span>);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                    }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                    $key = $key[$header-&gt;kid];</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                } <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> UnexpectedValueException(<span class="stringliteral">&#39;&quot;kid&quot; empty, unable to lookup correct key&#39;</span>);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            <span class="comment">// Check the signature</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            <span class="keywordflow">if</span>(!static::verify(<span class="stringliteral">&quot;$headb64.$bodyb64&quot;</span>, $sig, $key, $header-&gt;alg)){</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <span class="comment">// Check the nbf if it is defined. This is the time that the</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            <span class="comment">// token can actually be used. If it&#39;s not yet that time, abort.</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            <span class="keywordflow">if</span>(isset($payload-&gt;nbf) &amp;&amp; $payload-&gt;nbf &gt; (<a class="code" href="class_j_w_t_1_1_j_w_t.html#a9fc131b32308f2bacfd322ee88359af1">$timestamp</a> + static::$leeway)){</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> BeforeValidException(</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                 <span class="stringliteral">&#39;Cannot handle token prior to &#39;</span>.\date(DateTime::ISO8601, $payload-&gt;nbf)</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                );</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            <span class="comment">// Check that this token has been created before &#39;now&#39;. This prevents</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            <span class="comment">// using tokens that have been created for later use (and haven&#39;t</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            <span class="comment">// correctly used the nbf claim).</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <span class="keywordflow">if</span>(isset($payload-&gt;iat) &amp;&amp; $payload-&gt;iat &gt; (<a class="code" href="class_j_w_t_1_1_j_w_t.html#a9fc131b32308f2bacfd322ee88359af1">$timestamp</a> + static::$leeway)){</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> BeforeValidException(</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                 <span class="stringliteral">&#39;Cannot handle token prior to &#39;</span>.\date(DateTime::ISO8601, $payload-&gt;iat)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                );</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="comment">// Check if this token has expired.</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            <span class="keywordflow">if</span>(isset($payload-&gt;exp) &amp;&amp; (<a class="code" href="class_j_w_t_1_1_j_w_t.html#a9fc131b32308f2bacfd322ee88359af1">$timestamp</a> - static::$leeway) &gt;= $payload-&gt;exp){</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ExpiredException(<span class="stringliteral">&#39;Expired token&#39;</span>);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            <span class="keywordflow">return</span> $payload;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae350f876e9da3d1aa73620e1aafd4ad8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae350f876e9da3d1aa73620e1aafd4ad8">&#9670;&nbsp;</a></span>encode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static JWT\JWT::encode </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$alg</em> = <code>'HS256'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$keyId</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$head</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Converts and signs a PHP object or array into a <a class="el" href="class_j_w_t_1_1_j_w_t.html">JWT</a> string.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">object&#160;|&#160;array</td><td class="paramname">$payload</td><td>PHP object or array </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$key</td><td>The secret key. If the algorithm used is asymmetric, this is the private key </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$alg</td><td>The signing algorithm. Supported algorithms are 'ES256', 'HS256', 'HS384', 'HS512', 'RS256', 'RS384', and 'RS512' </td></tr>
    <tr><td class="paramtype">mixed</td><td class="paramname">$keyId</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$head</td><td>An array with header elements to attach</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>string A signed <a class="el" href="class_j_w_t_1_1_j_w_t.html">JWT</a></dd></dl>
<p>@uses jsonEncode @uses urlsafeB64Encode </p>
<div class="fragment"><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                                                                                                  {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            $header = array(<span class="stringliteral">&#39;typ&#39;</span> =&gt; <span class="stringliteral">&#39;JWT&#39;</span>, <span class="stringliteral">&#39;alg&#39;</span> =&gt; $alg);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <span class="keywordflow">if</span>($keyId !== <span class="keyword">null</span>){</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                $header[<span class="stringliteral">&#39;kid&#39;</span>] = $keyId;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <span class="keywordflow">if</span>(isset($head) &amp;&amp; \is_array($head)){</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                $header = \array_merge($head, $header);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            $segments = array();</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            $segments[] = static::urlsafeB64Encode(static::jsonEncode($header));</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            $segments[] = static::urlsafeB64Encode(static::jsonEncode($payload));</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            $signing_input = \implode(<span class="charliteral">&#39;.&#39;</span>, $segments);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            $signature = static::sign($signing_input, $key, $alg);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            $segments[] = static::urlsafeB64Encode($signature);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            return \implode(<span class="charliteral">&#39;.&#39;</span>, $segments);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a435d0d82b2ca3cca47e0902b8013ca12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a435d0d82b2ca3cca47e0902b8013ca12">&#9670;&nbsp;</a></span>jsonDecode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static JWT\JWT::jsonDecode </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$input</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Decode a JSON string into a PHP object.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$input</td><td>JSON string</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>object Object representation of JSON string</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">DomainException</td><td>Provided string was invalid JSON </td></tr>
  </table>
  </dd>
</dl>
<p>In PHP &gt;=5.4.0, json_decode() accepts an options parameter, that allows you to specify that large ints (like Steam Transaction IDs) should be treated as strings, rather than the PHP default behaviour of converting them to floats.</p>
<p>Not all servers will support that, however, so for older versions we must manually detect large ints in the JSON string and quote them (thus converting them to strings) before decoding, hence the preg_replace() call.</p>
<div class="fragment"><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                                                 {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            <span class="keywordflow">if</span>(\version_compare(PHP_VERSION, <span class="stringliteral">&#39;5.4.0&#39;</span>, <span class="stringliteral">&#39;&gt;=&#39;</span>) &amp;&amp; !(\defined(<span class="stringliteral">&#39;JSON_C_VERSION&#39;</span>) &amp;&amp; PHP_INT_SIZE &gt; 4)){</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                $obj = \json_decode($input, <span class="keyword">false</span>, 512, JSON_BIGINT_AS_STRING);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            } <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                $max_int_length = \strlen((<span class="keywordtype">string</span>)PHP_INT_MAX) - 1;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                $json_without_bigints = \preg_replace(<span class="stringliteral">&#39;/:\s*(-?\d{&#39;</span>.$max_int_length.<span class="stringliteral">&#39;,})/&#39;</span>, <span class="stringliteral">&#39;: &quot;$1&quot;&#39;</span>, $input);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                $obj = \json_decode($json_without_bigints);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            <span class="keywordflow">if</span>($errno = \json_last_error()){</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                static::handleJsonError($errno);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            } elseif($obj === <span class="keyword">null</span> &amp;&amp; $input !== <span class="stringliteral">&#39;null&#39;</span>){</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> DomainException(<span class="stringliteral">&#39;Null result with non-null input&#39;</span>);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            }</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            <span class="keywordflow">return</span> $obj;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        }</div>
</div><!-- fragment -->
</div>
</div>
<a id="adc333525c71ad92e6555c91b198fe925"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc333525c71ad92e6555c91b198fe925">&#9670;&nbsp;</a></span>jsonEncode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static JWT\JWT::jsonEncode </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$input</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Encode a PHP object into a JSON string.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">object&#160;|&#160;array</td><td class="paramname">$input</td><td>A PHP object or array</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>string JSON representation of the PHP object or array</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">DomainException</td><td>Provided object could not be encoded to valid JSON </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                                                 {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            $json = \json_encode($input);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            <span class="keywordflow">if</span>($errno = \json_last_error()){</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                static::handleJsonError($errno);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            } elseif($json === <span class="stringliteral">&#39;null&#39;</span> &amp;&amp; $input !== <span class="keyword">null</span>){</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> DomainException(<span class="stringliteral">&#39;Null result with non-null input&#39;</span>);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            }</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <span class="keywordflow">return</span> $json;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6dd3966da075dcf45391b4317d100c5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dd3966da075dcf45391b4317d100c5c">&#9670;&nbsp;</a></span>sign()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static JWT\JWT::sign </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$alg</em> = <code>'HS256'</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sign a string with a given key and algorithm.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$msg</td><td>The message to sign </td></tr>
    <tr><td class="paramtype">string&#160;|&#160;resource</td><td class="paramname">$key</td><td>The secret key </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$alg</td><td>The signing algorithm. Supported algorithms are 'ES256', 'HS256', 'HS384', 'HS512', 'RS256', 'RS384', and 'RS512'</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>string An encrypted message</dd></dl>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">DomainException</td><td>Unsupported algorithm was specified </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                                                               {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <span class="keywordflow">if</span>(empty(static::$supported_algs[$alg])){</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> DomainException(<span class="stringliteral">&#39;Algorithm not supported&#39;</span>);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            list($function, $algorithm) = static::$supported_algs[$alg];</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <span class="keywordflow">switch</span>($function){</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&#39;hash_hmac&#39;</span>:</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                    return \hash_hmac($algorithm, $msg, $key, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&#39;openssl&#39;</span>:</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                    $signature = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                    $success = \openssl_sign($msg, $signature, $key, $algorithm);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                    <span class="keywordflow">if</span>(!$success){</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                        <span class="keywordflow">throw</span> <span class="keyword">new</span> DomainException(<span class="stringliteral">&quot;OpenSSL unable to sign data&quot;</span>);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                    } <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                        <span class="keywordflow">if</span>($alg === <span class="stringliteral">&#39;ES256&#39;</span>){</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                            $signature = self::signatureFromDER($signature, 256);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                        }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                        <span class="keywordflow">return</span> $signature;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                    }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        }</div>
</div><!-- fragment -->
</div>
</div>
<a id="afcd4b0169e5dcc33a3b94901955845dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcd4b0169e5dcc33a3b94901955845dd">&#9670;&nbsp;</a></span>urlsafeB64Decode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static JWT\JWT::urlsafeB64Decode </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$input</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Decode a string with URL-safe Base64.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$input</td><td>A Base64 encoded string</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>string A decoded string </dd></dl>
<div class="fragment"><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                                                       {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            $remainder = \strlen($input) % 4;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            <span class="keywordflow">if</span>($remainder){</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                $padlen = 4 - $remainder;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                $input .= \str_repeat(<span class="charliteral">&#39;=&#39;</span>, $padlen);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            }</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            return \base64_decode(\strtr($input, <span class="stringliteral">&#39;-_&#39;</span>, <span class="stringliteral">&#39;+/&#39;</span>));</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae901b7dae5d8c2d2fba4ad43eb8010a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae901b7dae5d8c2d2fba4ad43eb8010a4">&#9670;&nbsp;</a></span>urlsafeB64Encode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static JWT\JWT::urlsafeB64Encode </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$input</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Encode a string with URL-safe Base64.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$input</td><td>The string you want encoded</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>string The base64 encode of what you passed in </dd></dl>
<div class="fragment"><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                                                       {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            return \str_replace(<span class="charliteral">&#39;=&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, \strtr(\base64_encode($input), <span class="stringliteral">&#39;+/&#39;</span>, <span class="stringliteral">&#39;-_&#39;</span>));</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Данные класса</h2>
<a id="adb20e5b829c374c490b4e86437847d8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb20e5b829c374c490b4e86437847d8a">&#9670;&nbsp;</a></span>$leeway</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">JWT\JWT::$leeway = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>When checking nbf, iat or expiration times, we want to provide some extra leeway time to account for clock skew. </p>

</div>
</div>
<a id="a52f6f608d7a40740d168a474b9d9d252"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52f6f608d7a40740d168a474b9d9d252">&#9670;&nbsp;</a></span>$private_key</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string JWT\JWT::$private_key =</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Ключи для шифрования и дешифрования токена. Подлежат замене в новых проектах </p>

</div>
</div>
<a id="a5590a1db32a02bbd0c0290e94b3704d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5590a1db32a02bbd0c0290e94b3704d9">&#9670;&nbsp;</a></span>$public_key</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string JWT\JWT::$public_key =</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa1c2f153bce58676f06061202eb0adf4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1c2f153bce58676f06061202eb0adf4">&#9670;&nbsp;</a></span>$supported_algs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">JWT\JWT::$supported_algs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Инициализатор</b><div class="fragment"><div class="line">= array(</div>
<div class="line">         <span class="stringliteral">&#39;ES256&#39;</span> =&gt; array(<span class="stringliteral">&#39;openssl&#39;</span>, <span class="stringliteral">&#39;SHA256&#39;</span>),</div>
<div class="line">         <span class="stringliteral">&#39;HS256&#39;</span> =&gt; array(<span class="stringliteral">&#39;hash_hmac&#39;</span>, <span class="stringliteral">&#39;SHA256&#39;</span>),</div>
<div class="line">         <span class="stringliteral">&#39;HS384&#39;</span> =&gt; array(<span class="stringliteral">&#39;hash_hmac&#39;</span>, <span class="stringliteral">&#39;SHA384&#39;</span>),</div>
<div class="line">         <span class="stringliteral">&#39;HS512&#39;</span> =&gt; array(<span class="stringliteral">&#39;hash_hmac&#39;</span>, <span class="stringliteral">&#39;SHA512&#39;</span>),</div>
<div class="line">         <span class="stringliteral">&#39;RS256&#39;</span> =&gt; array(<span class="stringliteral">&#39;openssl&#39;</span>, <span class="stringliteral">&#39;SHA256&#39;</span>),</div>
<div class="line">         <span class="stringliteral">&#39;RS384&#39;</span> =&gt; array(<span class="stringliteral">&#39;openssl&#39;</span>, <span class="stringliteral">&#39;SHA384&#39;</span>),</div>
<div class="line">         <span class="stringliteral">&#39;RS512&#39;</span> =&gt; array(<span class="stringliteral">&#39;openssl&#39;</span>, <span class="stringliteral">&#39;SHA512&#39;</span>),</div>
<div class="line">        )</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9fc131b32308f2bacfd322ee88359af1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fc131b32308f2bacfd322ee88359af1">&#9670;&nbsp;</a></span>$timestamp</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">JWT\JWT::$timestamp = null</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Allow the current timestamp to be specified. Useful for fixing a value within unit testing.</p>
<p>Will default to PHP time() value if null. </p>

</div>
</div>
<a id="a368a0e3c908b11d12ac1e02eebe15079"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a368a0e3c908b11d12ac1e02eebe15079">&#9670;&nbsp;</a></span>ASN1_BIT_STRING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const JWT\JWT::ASN1_BIT_STRING = 0x03</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a687f9c45e97ea4609d260108c66ebe54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a687f9c45e97ea4609d260108c66ebe54">&#9670;&nbsp;</a></span>ASN1_INTEGER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const JWT\JWT::ASN1_INTEGER = 0x02</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="afb818526edfd85904f3048f9322f1231"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb818526edfd85904f3048f9322f1231">&#9670;&nbsp;</a></span>ASN1_SEQUENCE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const JWT\JWT::ASN1_SEQUENCE = 0x10</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>Объявления и описания членов класса находятся в файле:<ul>
<li><a class="el" href="_j_w_t_8php.html">JWT.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="alogin_8php_html_a62dd3be39bdab088e08aef405eef5de8"><div class="ttname"><a href="login_8php.html#a62dd3be39bdab088e08aef405eef5de8">$jwt</a></div><div class="ttdeci">$jwt</div><div class="ttdef"><b>Definition:</b> login.php:48</div></div>
<div class="ttc" id="aclass_j_w_t_1_1_j_w_t_html_a9fc131b32308f2bacfd322ee88359af1"><div class="ttname"><a href="class_j_w_t_1_1_j_w_t.html#a9fc131b32308f2bacfd322ee88359af1">JWT\JWT\$timestamp</a></div><div class="ttdeci">static $timestamp</div><div class="ttdef"><b>Definition:</b> JWT.php:45</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_j_w_t.html">JWT</a></li><li class="navelem"><a class="el" href="class_j_w_t_1_1_j_w_t.html">JWT</a></li>
    <li class="footer">Документация по TriTochki. Последние изменения: Вт 15 Дек 2020 10:51:04. Создано системой <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
